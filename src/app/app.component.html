<mat-toolbar>
    <button mat-icon-button class="icon" (click)="drawer.toggle()">
        <mat-icon>menu</mat-icon>
    </button>

    <span mat-menu-item routerLink="/">OneWork</span>

    <span class="spacer"></span>

    <button mat-icon-button (click)="printState()" *ngIf="!env.production">
        <mat-icon>remove_red_eye</mat-icon>
    </button>
    
    <span class="spacer"></span>

    <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>person</mat-icon>
    </button>

    <mat-menu #menu="matMenu">
        <button mat-menu-item routerLink="/session/profile" *ngIf="!((stateSS.session$ | async)?.token === '')">
            <mat-icon style="color: rgb(82, 189, 82)">fiber_manual_record</mat-icon>
            <span>{{ (stateSS.session$ | async)?.user?.email }}</span>
        </button>

        <mat-divider *ngIf="!((stateSS.session$ | async)?.token === '')"></mat-divider>

        <button mat-menu-item routerLink="/session/login" *ngIf="!(stateSS.session$ | async)?.token">
            <mat-icon>input</mat-icon>
            <span>Login</span>
        </button>

        <button mat-menu-item routerLink="/session/register" *ngIf="!(stateSS.session$ | async)?.token">
            <mat-icon>add_circle</mat-icon>
            <span>Sing up</span>
        </button>

        <mat-divider *ngIf="!((stateSS.session$ | async)?.token === '')"></mat-divider>
        
        <button mat-menu-item routerLink="/session/change-email" *ngIf="(stateSS.session$ | async)?.token">
            <mat-icon>mail</mat-icon>
            <span>Change email</span>
        </button>

        <button mat-menu-item routerLink="/session/change-password" *ngIf="(stateSS.session$ | async)?.token">
            <mat-icon>vpn_key</mat-icon>
            <span>Change password</span>
        </button>

        <button mat-menu-item routerLink="/wall" *ngIf="(stateSS.session$ | async)?.token" (click)=stateSS.clear()>
            <!-- // TODO: hacer llamada logout en sessionStoreService -->
            <mat-icon>launch</mat-icon>
            <span>Logout</span>
        </button>
    </mat-menu>
</mat-toolbar>

<mat-drawer-container class="sidenav-container" [hasBackdrop]="(stateSS.smallScreen$ | async)" autosize>
    <mat-drawer #drawer class="sidenav" [mode]="(stateSS.smallScreen$ | async) ? 'over' : 'side'" [opened]="!(stateSS.smallScreen$ | async)">
        <div *ngIf="(stateSS.smallScreen$ | async); else buttonsWithoutToggleMenu" (click)="drawer.toggle()">
            <p><button mat-raised-button routerLink="/wall">Wall</button></p>
            <p><button mat-raised-button routerLink="/admin">Admin</button></p>
        </div>
            
        <ng-template #buttonsWithoutToggleMenu>
            <p><button mat-raised-button routerLink="/wall">Wall</button></p>
            <p><button mat-raised-button routerLink="/admin">Admin</button></p>
        </ng-template>
    </mat-drawer>
  
    <div class="sidenav-content">
        <router-outlet></router-outlet>
    </div>
</mat-drawer-container>